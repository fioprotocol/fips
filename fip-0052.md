---
fip: 51
title: FIO Restake
status: Draft
type: Functionality
author: Adam Androulidakis <adam@fio.net>
created: 2025-05-18
updated: 2025-05-18
---

# Abstract
Restake FIO rewards without having to wait for the 7 day unlock. Restaking gives an additional small percentage of unlock rewards to the BP reward pool.

New actions
|Contract|Action|Endpoint|Description|
|---|---|---|---|
|fio.token|restake|/retake_fio_tokens|Stakes specified FIO rewards.|

## New getters
|End point|Description|
|---|---|
|n/a|n/a|

# Motivation

# Specification
## Process
  
## New actions
### Restake FIO
Stakes FIO rewards in 
#### Contract: fio.token
#### New action: *restake*
#### New end point: /restake_fio_tokens
#### New fee: restake_fio_tokens, fee amount will be determined during development and updated here
#### RAM increase: To be determined during implementation
#### Request body
|Parameter|Required|Format|Definition|
|---|---|---|---|
|fioaddress|Yes|FIO Address|FIO Address of the generating account. This will be used to verify domain ownership, and the NFT signature created for the address|
|supply|Yes|Positive Int|Maximum mintable supply of the asset|
|symbol|Yes|1-5 character string|The symbol (or name) of the new asset|
|max_fee|Yes|Positive Int|Maximum amount of SUFs the user is willing to pay for fee. Should be preceded by [/get_fee](https://dev.fio.net/reference/get_fee) for correct value.|
|tpid|Yes|FIO Address|FIO Address of the entity which generates this transaction. TPID rewards will be paid to this address. Set to empty if not known. Auto-renew transactions will carry this TPID.|
|actor|Yes|12 character string|Valid actor of signer|
##### Example
```
{
  "fioaddress": "1000000",
  "amount": "1000000",
  "max_fee": 30000000000,
  "tpid": "rewards@wallet",
  "actor": "aftyershcu22"
}
```
#### Processing
* FIO Address is validated
* Amount parameter is validated
* Request is validated per Exception handling
* RAM of actor calling action is increased
* restake_fio_tokens is charged to actor calling action
* a votable portion of fees are issued from the users rewards to the block producer reward pools
* Check for maximum FIO transaction size is applied
#### Exception handling
|Error condition|Trigger|Type|fields:name|fields:value|Error message|
|---|---|---|---|---|---|
|Invalid FIO Address|address format is not valid|400|"fioaddress"|Value sent in, e.g. "notvalidfioaddress"|"Nust be a valid FIO address"|
|Invalid Amount|Supply is not positive|400|"supply"|Value sent in, i.e. "-1"|"Invalid Amount."|
|Invalid fee value|max_fee format is not valid|400|"max_fee"|Value sent in, e.g. "-100"|"Invalid fee value"|
|Fee exceeds maximum|Actual fee is greater than supplied max_fee|400|"max_fee"|Value sent in, e.g. "1000000000"|"Fee exceeds supplied maximum"|
|Insufficient balance|Available balance in account is less than fee|400|"max_fee"|Value sent in, e.g. "100000000000"|"Insufficient balance"|
|Insufficient rewards|Specified rewards are less than unlockable amount|400|"max_fee"|Value sent in, e.g. "100000000000"|"Insufficient balance"|
|Invalid TPID|tpid format is not valid|400|"tpid"|Value sent in, e.g. "notvalidfioaddress"|"TPID must be empty or valid FIO address"|
|Signer not actor|Signer not actor|403|||Type: invalid_signature|
#### Response body
|Parameter|Format|Definition|
|---|---|---|
|status|String|OK if successful|
|fee_collected|Int|Amount of SUFs collected as fee|
##### Example
```
{
  "status": "OK",
  "rewards_staked", "1000000000",
  "fee_collected": 1000000000
}
```

# Rationale
TBD

# Implementation
TBD

# Backwards Compatibility
No changes to existing actions.

# Future considerations

# Discussion link
